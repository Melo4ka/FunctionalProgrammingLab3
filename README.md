# Лабораторная работа №3: Функциональное программирование

**Студент**: Андриенко Сергей Вячеславович

**Группа**: P34092

## Цель работы

Получить навыки работы с вводом/выводом, потоковой обработкой данных, командной строкой.

## Требования

Реализовать лабораторную работу по предмету "Вычислительная математика" посвящённую аппроксимации со следующими
дополнениями:

1. Реализовать методы интерполяции:
    * Линейная интерполяция.
    * Метод Лагранжа.
2. Входные данные должны подаваться на стандартный ввод:
    * Номер выбранного метода интерполяции.
    * Количество точек.
    * Значения каждой точки в формате "x<sub>i</sub> y<sub>i</sub>".
    * Аргумент для интерполяции (x).
3. Выходные данные должны подаваться на стандартный вывод:
    * Найденное значение функции f(x).
4. Программа должна работать в потоковом режиме.

## Описание реализации

Функция для запроса ввода от пользователя через стандартный ввод с преобразованием введенных данных в нужный тип:

```clojure
(request-input [this message parser]
               (log logger (str message ": "))
               (let [input (str/trim (read-line))]
                 (try
                   (parser input)
                   (catch Exception _
                     (log-new-line logger "Формат введенных вами данных не соответствует требуемому.")
                     (request-input this message parser)))))
```

Функция для реализации линейной интерполяции:

```clojure
(defn interpolate-by-linear [points x]
  (let [p0 (first points)
        p1 (second points)
        t (/ (- x (:x p0)) (- (:x p1) (:x p0)))]
    (+ (:y p0) (* t (- (:y p1) (:y p0))))))
```

Функция для реализации интерполяции методом Лагранжа:

```clojure
(defn lagrange-coefficient [points i x]
  (reduce
    (fn [acc j]
      (if (= i j)
        acc
        (* acc
           (- x (:x (nth points j)))
           (/ 1 (- (:x (nth points i)) (:x (nth points j)))))))
    1
    (range (count points))))

(defn interpolate-by-lagrange [points x]
  (reduce
    (fn [result i]
      (+ result (* (:y (nth points i)) (lagrange-coefficient points i x))))
    0
    (range (count points))))
```

## Пример одного цикла работы программы

```
[FP] Доступные алгоритмы интерполяции:
[FP] 1. Линейная интерполяция
[FP] 2. Метод Лагранжа
[FP] Введите номер алгоритма: 2
[FP] Введите количество точек (от 2 до 12): 3
[FP] Введите точку (x₁ и y₁): 1 2
[FP] Введите точку (x₂ и y₂): 3 4
[FP] Введите точку (x₃ и y₃): 8.5 9.5
[FP] Введите x для интерполяции: 5
[FP] Результат интерполяции: 6.0
```

## Заключение

В ходе выполнения лабораторной работы были изучены функции Clojure для работы с вводом и выводом, а также
организована обработка данных в потоковом режиме. Реализация продемонстрировала, как функциональный подход и разделение
логики обработки данных от алгоритмов интерполяции могут улучшить чистоту и поддерживаемость кода. Кроме того, благодаря
использованию функционального языка реализация методов интерполяции оказалась очень простой и понятной.